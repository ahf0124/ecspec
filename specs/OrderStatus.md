# 受注ステータスフロー
顧客が商品を購入した後に発生する一連の受注業務フローを受注ステータスフローと呼ぶ。
ECにおける主要な業務が発生するフローとなる。
顧客が注文した内容は、ステータスが「受注」「引当」「出荷指示」「出荷」「着荷」「計上」遷移していく形となる。
また、このステータスに応じて、入金を確認したり、決済を確定させたり、配送会社における送り状の番号を送ったり、ポイントを付与したり「業務」が発生していく。


この「業務」は業態や業種によって、EC事業の体制や作業者の割り当てによって異なる。
一般的な例をもとに、あるべき業務フローを検討するのが良い。

一般的でシンプルなフローをベースに紹介する。

![受注ステータスフロー](https://github.com/commerble/ecspec/blob/master/specs/media/orderstatus.jpg)


## 注文確認
- 注文を受け付けて問題ないかを確認する。
- 注文情報の確認は誰か人力で行うかどうか。
- 例えば、備考にお客様が入力した情報を確認せずにWMS側に流す？キャンセルできる？

- 離島や特定住所の場合は、そもそも送付して問題ないか、送料の再計算が必要かなどを調整する必要がある。
- ブラックリストにあたるユーザーからの注文の場合は、内容を確認する場合がある。
- 上記いずれにも当たらない場合は、自動で次のステータスに移動するなども可能である。

### 受注分割
- 受注後に注文を分割することもある。(配送日が違う、発送元が違う)


## 発注
発注が必要な場合は、発注処理を行う。発注をEDIもしくはFAXなどで自動連係することも多い。
メーカーに発注して、メーカーから直送するようなケースも存在するし、メーカーからの商品を一度倉庫に集めて配送するケースも存在する。


## 入金確認
入金確認は、その方法によって連携や確認方法が異なる。
自動化することによって、業務効率を上げることが可能。

### 入金確認(クレジットカード)
- 利用されたクレジットカード情報、利用者情報が問題ないか確認する。
- これまで不正に利用されていないかなど、外部サービスを利用して確認することもある。

### 入金確認(銀行振込)
- 銀行振込は銀行に入金があったかを確認する必要がある
- 仮想口座を使うと、入金と口座が１：１で紐づくので、API経由などで自動で入金処理することが可能。
- 仮想口座の場合は、番号が使いまわしとなっている。

### 入金確認(NP後払い)
- 後払いサービスに該当注文を連携して与信が下りるかどうか確認する
- 確認は、カート時点からリアルタイム与信を行うようなことも可能である

### 入金確認(Amazonペイメント)

- 主なメリットとして、Amazonに登録されている住所を利用する場合、保証がある。
- より詳細なAmazonペイメントの情報については後述する。


## 在庫引当とは
ECサイトで物が売れたからといって、直接商品が確保され、そのまま配送に回されるわけではない。
商品は実際には、倉庫の棚にある。注文データを倉庫に渡すことによって出荷可能な商品を確保し、
注文(お客様、配送先)と紐づけ、出荷指示につなげる必要がある。
規模が大きくなると倉庫も複数になるので、どの倉庫で引当てて、どの配送会社で送るかなど
業務の規模が複雑になる傾向がある。

## 出荷後の返品オペレーション


*** 
